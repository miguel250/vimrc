#!/usr/bin/env bash

SCRIPTS_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_ROOT="$SCRIPTS_DIR/../"

declare -a binaries=("go" "yarn" "pip3")

for binary in "${binaries[@]}"
do
  if [ -z $(which $binary) ]
  then
    echo "${binary} needs to be installed"
    exit 1
  fi
done

cd $PROJECT_ROOT

rm -rf env/
yarn install
pip3 install --user virtualenv
virtualenv env --python=python3.7
env/bin/pip3 install --upgrade -r requirements.txt

